<nav id="sources">
    <ul>
        {% for key, source in sources %}
            {% if source.heading is defined %}
                <li class="heading"><span>{{ source.heading|t('qarr') }}</span></li>
            {% else %}
                <li {% if source.key != '*' %}class="group-item"{% endif %}>
                    <a data-label="{{ source.label }}" data-key="{{ source.key is defined ? source.key : key }}" {%- if source.defaultSort is defined %}{% set defaultSort = source.defaultSort %} data-default-sort="{{ defaultSort is iterable ? defaultSort|join(':') : defaultSort }}"{% endif %}{%- if source.data is defined -%}{% for dataKey, dataVal in source.data %} data-{{ dataKey }}="{{ dataVal }}"{% endfor %}{%- endif %}>
                        <span class="source-text">{{- source.label -}}</span>
                        {% if source.id is defined %}
                            {% set count = craft.qarr.getCount('reviews', '*', null, source.type, source.id) %}
                            <span class="badge-count">{{ count is defined and count > 0 ? count : '' }}</span>
                        {% endif %}
                    </a>
                </li>
            {% endif %}
        {% endfor %}
    </ul>
</nav>

{% if customizableSources %}
    {% if craft.craftify %}
        <a class="customize-sources settings icon" title="Customize sources"></a>
    {% else %}
        <a class="customize-sources block px-6 py-4 mt-6 tracking-wider text-xs" title="{{ 'Customize sources'|t('qarr') }}">{{ 'Customize Sidebar'|t('qarr') }}</a>
    {% endif %}
{% endif %}