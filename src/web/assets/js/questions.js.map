{"version":3,"sources":["webpack:///webpack/bootstrap f2be000b272777c33bf7","webpack:///./development/js/questions.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","AnswerItem","Garnish","Base","extend","$container","$approveBtn","$rejectBtn","$deleteBtn","$statusLabel","statusLabelText","id","questionId","init","el","this","$","find","data","addListener","performAction","e","_this","preventDefault","action","currentTarget","Craft","postActionRequest","proxy","response","textStatus","success","status","updateStatus","cp","displayNotice","t","velocity","duration","that","oldStatus","text","complete","html","removeClass","addClass","$doc","ready","length","QarrEmailCorrespondence","on","type","opacity","remove","entry","message","QarrPrompt","_this2","setTimeout","redirectTo","getCpUrl","each"],"mappings":"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","file":"/release/src/web/assets/js/questions.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2be000b272777c33bf7","let AnswerItem;\n\nAnswerItem = Garnish.Base.extend({\n    $container: null,\n    $approveBtn: null,\n    $rejectBtn: null,\n    $deleteBtn: null,\n    $statusLabel: null,\n    statusLabelText: null,\n\n    id: null,\n    questionId: null,\n\n    init(el) {\n        this.$container = $(el);\n        this.$approveBtn = this.$container.find('.btn-approve');\n        this.$rejectBtn = this.$container.find('.btn-reject');\n        this.$deleteBtn = this.$container.find('.btn-delete');\n        this.$statusLabel = this.$container.find('.panel-item-status');\n        this.statusLabelText = this.$statusLabel.find('span');\n\n        this.id = this.$container.data('id');\n        this.questionId = this.$container.data('parent-id');\n\n        this.addListener(this.$approveBtn, 'click', 'performAction')\n        this.addListener(this.$rejectBtn, 'click', 'performAction')\n        this.addListener(this.$deleteBtn, 'click', 'performAction')\n\n    },\n\n    performAction(e) {\n        e.preventDefault();\n        let action = $(e.currentTarget).data('action');\n\n        let data = {\n            id: this.id,\n            action: action\n        };\n\n        Craft.postActionRequest('qarr/answers/perform-action', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                if (response.status !== 'deleted') {\n                    this.updateStatus(response);\n                    Craft.cp.displayNotice(Craft.t('qarr', 'Answer status changed'))\n                } else {\n                    this.$container.velocity('slideUp', {duration: 300});\n                    Craft.cp.displayNotice(Craft.t('qarr', 'Answer deleted'))\n                }\n            }\n        }), this))\n    },\n\n    updateStatus(response) {\n        let that = this;\n        let oldStatus = this.statusLabelText.text();\n\n        this.statusLabelText.velocity('transition.fadeOut', {\n            duration: 350,\n            complete: function () {\n                that.statusLabelText.html(response.status);\n                that.$statusLabel.removeClass('status-'+oldStatus);\n                that.$statusLabel.addClass('status-'+response.status);\n                that.statusLabelText.velocity('transition.fadeIn', {duration: 100});\n            }\n        });\n    }\n\n});\n\nGarnish.$doc.ready(function () {\n\n    if ($('#reply-email-btn').length > 0) {\n        let emailCorrespondence = new QarrEmailCorrespondence('#reply-email-btn');\n    }\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Clear Entry Abuse\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.abuse-reported-meta .btns').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('entry-id'),\n            type: $(this).data('type')\n        }\n\n        Craft.postActionRequest('qarr/elements/clear-abuse', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                Craft.cp.displayNotice(Craft.t('qarr', 'Abuse cleared'))\n                $('.abuse-reported-meta').velocity({opacity: 0}, 500, function() {\n                    $('.abuse-reported-meta').remove()\n                })\n            }\n        }), this))\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Update Entry Status\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.update-status-btn').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('element-id'),\n            status: $(this).data('status'),\n            type: $(this).data('type')\n        }\n\n        Craft.postActionRequest('qarr/elements/update-status', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                Craft.cp.displayNotice(Craft.t('qarr', 'Status updated'));\n                if (response.entry.status === 'approved') {\n                    $('.status-badge').removeClass('status-pending');\n                    $('.status-badge').removeClass('status-rejected');\n                }\n\n                if (response.entry.status === 'rejected') {\n                    $('.status-badge').removeClass('status-pending');\n                    $('.status-badge').removeClass('status-approved');\n                }\n                $('.status-badge').addClass('status-'+response.entry.status);\n                $('.status-badge').find('span').html(response.entry.status);\n            }\n        }), this))\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Delete Entry\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.delete-entry').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('element-id'),\n            type: $(this).data('type')\n        };\n\n        let message = Craft.t('qarr', 'Deleting this question will also remove all its answers and correspondence?');\n        let deletePrompt = new QarrPrompt(message, null);\n\n        deletePrompt.on('response', function(response) {\n            if (response.response === 'ok') {\n                Craft.postActionRequest('qarr/questions/delete', data, $.proxy(((response, textStatus) => {\n                    if (response.success) {\n                        setTimeout($.proxy(function () {\n                            Craft.cp.displayNotice(Craft.t('qarr', 'Entry deleted, redirecting...'))\n                            setTimeout($.proxy(function () {\n                                Craft.redirectTo(Craft.getCpUrl() + '/qarr/reviews')\n                            }, this), 1000);\n                        }, this), 1000);\n                    }\n                }), this))\n            }\n        });\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Answer Item\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $.each($('.answer-item'), function (i, el) {\n        new AnswerItem(el);\n    });\n});\n\n\n// WEBPACK FOOTER //\n// ./development/js/questions.js"],"sourceRoot":""}