Garnish.$doc.ready(function(){$("#reply-to-feedback").on("click",function(e){var t=$(this).data("element-id");new ReplyModal(null,"new",t)}),$("#reply-email-btn").length>0&&new QarrEmailCorrespondence("#reply-email-btn"),$("#answers-element").length>0&&new Answers.Container("#answers-element");var e=$(".element-status");$(".update-status-btn").on("click",function(t){t.preventDefault();var s={id:$(this).data("element-id"),status:$(this).data("status"),type:$(this).data("type")};Craft.postActionRequest("qarr/elements/update-status",s,$.proxy(function(t,s){t&&t.success&&(Craft.cp.displayNotice(Craft.t("qarr","Status updated")),e.removeClass("pulse"),"approved"===t.entry.status&&(e.removeClass("pending"),e.removeClass("rejected")),"rejected"===t.entry.status&&(e.removeClass("pending"),e.removeClass("approved")),e.addClass(t.entry.status),e.find("span").html(t.entry.status))},this))}),$(".delete-entry").on("click",function(e){e.preventDefault();var t={id:$(this).data("element-id"),type:$(this).data("type")},s=Craft.t("qarr","Deleting this review will also remove all its responses and correspondence?");"questions"===t.type&&(s=Craft.t("qarr","Deleting this question will also remove all its answers and correspondence?")),new QarrPrompt(s,null).on("response",function(e){var s=this;e&&"ok"===e.response&&Craft.postActionRequest("qarr/elements/delete",t,$.proxy(function(e,r){e.success&&setTimeout($.proxy(function(){Craft.cp.displayNotice(Craft.t("qarr","Entry deleted, redirecting...")),setTimeout($.proxy(function(){Craft.redirectTo(Craft.getCpUrl()+"/qarr/"+t.type)},this),1e3)},s),1e3)},this))})})});
