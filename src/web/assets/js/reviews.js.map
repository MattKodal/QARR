{"version":3,"sources":["webpack:///webpack/bootstrap f2be000b272777c33bf7","webpack:///./development/js/reviews.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Garnish","$doc","ready","$","length","tippy","onShow","e","id","template","document","getElementById","cloneNode","show","setContent","placement","interactive","theme","duration","arrow","arrowType","multiple","QarrEmailCorrespondence","QarrReplyToFeedback","on","preventDefault","data","this","type","Craft","postActionRequest","proxy","response","textStatus","success","cp","displayNotice","t","velocity","opacity","remove","status","entry","removeClass","addClass","find","html","message","QarrPrompt","_this","setTimeout","redirectTo","getCpUrl"],"mappings":"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","file":"/release/src/web/assets/js/reviews.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 25);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2be000b272777c33bf7","Garnish.$doc.ready(function() {\n\n    if ($('.flagged-rules').length > 0) {\n        const tip = tippy('.tippy-with-html', {\n            onShow(e) {\n                const id = e.id;\n                const template = document.getElementById('flag-template-'+id).cloneNode(true);\n                $(template).show();\n                e.setContent(template);\n            },\n            placement: 'right',\n            interactive: true,\n            theme: 'light',\n            duration: 400,\n            arrow: true,\n            arrowType: 'sharp',\n            multiple: true\n        });\n    }\n\n    if ($('#reply-email-btn').length > 0) {\n        let emailCorrespondence = new QarrEmailCorrespondence('#reply-email-btn');\n    }\n\n    if ($('#reply-to-feedback-btn').length > 0) {\n        let replyGo = new QarrReplyToFeedback('#reply-to-feedback-btn');\n    }\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Clear Entry Abuse\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.abuse-reported-meta .btns').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('entry-id'),\n            type: $(this).data('type')\n        }\n\n        Craft.postActionRequest('qarr/elements/clear-abuse', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                Craft.cp.displayNotice(Craft.t('qarr', 'Abuse cleared'))\n                $('.abuse-reported-meta').velocity({opacity: 0}, 500, function() {\n                    $('.abuse-reported-meta').remove()\n                })\n            }\n        }), this))\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Update Entry Status\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.update-status-btn').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('element-id'),\n            status: $(this).data('status'),\n            type: $(this).data('type')\n        }\n\n        Craft.postActionRequest('qarr/elements/update-status', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                Craft.cp.displayNotice(Craft.t('qarr', 'Status updated'));\n                if (response.entry.status === 'approved') {\n                    $('.status-badge').removeClass('status-pending');\n                    $('.status-badge').removeClass('status-rejected');\n                }\n\n                if (response.entry.status === 'rejected') {\n                    $('.status-badge').removeClass('status-pending');\n                    $('.status-badge').removeClass('status-approved');\n                }\n                $('.status-badge').addClass('status-'+response.entry.status);\n                $('.status-badge').find('span').html(response.entry.status);\n            }\n        }), this))\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Delete Feedback\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // TODO: move this into a class in correspondence.js\n    $('.feedback-panel #delete-feedback-btn').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('reply-id')\n        };\n\n        Craft.postActionRequest('qarr/replies/delete', data, $.proxy(((response, textStatus) => {\n            if (response.success) {\n                Craft.cp.displayNotice(Craft.t('qarr', 'Reply deleted'));\n                $('.panel-response').remove();\n                $('.feedback-panel').removeClass('has-response');\n                $('#reply-to-feedback-btn').show();\n            }\n        }), this))\n    });\n\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    // Delete Entry\n    // ~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    $('.delete-entry').on('click', function(e) {\n        e.preventDefault();\n\n        let data = {\n            id: $(this).data('element-id'),\n            type: $(this).data('type')\n        };\n\n        let message = Craft.t('qarr', 'Deleting this review will also remove all its responses and correspondence?');\n        let deletePrompt = new QarrPrompt(message, null);\n\n        deletePrompt.on('response', function(response) {\n            if (response.response === 'ok') {\n                Craft.postActionRequest('qarr/reviews/delete', data, $.proxy(((response, textStatus) => {\n                    if (response.success) {\n                        setTimeout($.proxy(function () {\n                            Craft.cp.displayNotice(Craft.t('qarr', 'Entry deleted, redirecting...'))\n                            setTimeout($.proxy(function () {\n                                Craft.redirectTo(Craft.getCpUrl() + '/qarr/reviews')\n                            }, this), 1000);\n                        }, this), 1000);\n                    }\n                }), this))\n            }\n        });\n    });\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./development/js/reviews.js"],"sourceRoot":""}